{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ACER\\\\Desktop\\\\quiz app\\\\src\\\\views\\\\AttemptQuizView.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { db, appId } from '../firebase/config';\nimport { doc, getDoc, updateDoc, arrayUnion } from 'firebase/firestore';\nimport { ArrowLeft } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AttemptQuizView = ({\n  setView,\n  setQuizCode,\n  setError,\n  error,\n  userId,\n  localQuizzes\n}) => {\n  _s();\n  const [localCode, setLocalCode] = useState('');\n  const handleJoin = async e => {\n    e.preventDefault();\n    setError('');\n    const trimmedCode = localCode.trim();\n    if (!trimmedCode) {\n      setError(\"Please enter a quiz code.\");\n      return;\n    }\n    setQuizCode(trimmedCode);\n\n    // Check if this is a demo quiz code (for testing without Firebase)\n    if (trimmedCode === 'DEMO' || trimmedCode === 'TEST') {\n      console.log(\"Joining demo quiz with code:\", trimmedCode);\n      alert(\"Joining demo quiz! This works without Firebase.\");\n      setView('quiz');\n      return;\n    }\n    const quizDocPath = `/artifacts/${appId}/public/data/quizzes/${trimmedCode}`;\n    const quizDocRef = doc(db, quizDocPath);\n    try {\n      const docSnap = await getDoc(quizDocRef);\n      if (docSnap.exists()) {\n        const quizData = docSnap.data();\n        if (quizData.status !== 'lobby') {\n          setError(`This quiz is already ${quizData.status}. You can no longer join.`);\n          setQuizCode('');\n          return;\n        }\n        if (quizData.players && quizData.players.some(p => p.id === userId)) {\n          setView('quiz');\n          return;\n        }\n        const newPlayer = {\n          id: userId,\n          name: `Player ${Math.floor(Math.random() * 1000)}`\n        };\n        await updateDoc(quizDocRef, {\n          players: arrayUnion(newPlayer)\n        });\n        setView('quiz');\n      } else {\n        setError(\"Quiz not found. Please check the code and try again.\");\n        setQuizCode('');\n      }\n    } catch (err) {\n      console.error(\"Error joining quiz:\", err);\n      setError(\"Could not join the quiz. Please check the code and your connection.\");\n      setQuizCode('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-md mx-auto text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setView('home');\n        setError('');\n      },\n      className: \"mb-6 text-cyan-400 hover:text-cyan-300 flex items-center gap-2 mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), \" Back to Home\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-4xl font-bold mb-4 text-cyan-400\",\n      children: \"Join a Quiz\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-400 mb-4\",\n      children: \"Enter the code from the quiz host to join.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-yellow-400 mb-8 text-sm\",\n      children: \"\\uD83D\\uDCA1 Try \\\"DEMO\\\" or \\\"TEST\\\" for demo mode (works without Firebase)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleJoin,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: localCode,\n        onChange: e => setLocalCode(e.target.value),\n        placeholder: \"ENTER CODE\",\n        className: \"w-full bg-gray-800 text-white p-4 rounded-lg text-center text-2xl tracking-widest font-bold border-2 border-gray-600 focus:ring-4 focus:ring-cyan-500/50 focus:outline-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-400 mt-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl mt-6\",\n        children: \"Join Quiz\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_s(AttemptQuizView, \"wIEcH/w29uYMcRmjnk4UqKncQkk=\");\n_c = AttemptQuizView;\nvar _c;\n$RefreshReg$(_c, \"AttemptQuizView\");","map":{"version":3,"names":["React","useState","db","appId","doc","getDoc","updateDoc","arrayUnion","ArrowLeft","jsxDEV","_jsxDEV","AttemptQuizView","setView","setQuizCode","setError","error","userId","localQuizzes","_s","localCode","setLocalCode","handleJoin","e","preventDefault","trimmedCode","trim","console","log","alert","quizDocPath","quizDocRef","docSnap","exists","quizData","data","status","players","some","p","id","newPlayer","name","Math","floor","random","err","className","children","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/ACER/Desktop/quiz app/src/views/AttemptQuizView.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { db, appId } from '../firebase/config';\r\nimport { doc, getDoc, updateDoc, arrayUnion } from 'firebase/firestore';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\nexport const AttemptQuizView = ({ setView, setQuizCode, setError, error, userId, localQuizzes }) => {\r\n    const [localCode, setLocalCode] = useState('');\r\n\r\n    const handleJoin = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        const trimmedCode = localCode.trim();\r\n        if (!trimmedCode) {\r\n            setError(\"Please enter a quiz code.\");\r\n            return;\r\n        }\r\n\r\n        setQuizCode(trimmedCode);\r\n\r\n        // Check if this is a demo quiz code (for testing without Firebase)\r\n        if (trimmedCode === 'DEMO' || trimmedCode === 'TEST') {\r\n            console.log(\"Joining demo quiz with code:\", trimmedCode);\r\n            alert(\"Joining demo quiz! This works without Firebase.\");\r\n            setView('quiz');\r\n            return;\r\n        }\r\n\r\n        const quizDocPath = `/artifacts/${appId}/public/data/quizzes/${trimmedCode}`;\r\n        const quizDocRef = doc(db, quizDocPath);\r\n\r\n        try {\r\n            const docSnap = await getDoc(quizDocRef);\r\n            if (docSnap.exists()) {\r\n                const quizData = docSnap.data();\r\n\r\n                if (quizData.status !== 'lobby') {\r\n                    setError(`This quiz is already ${quizData.status}. You can no longer join.`);\r\n                    setQuizCode('');\r\n                    return;\r\n                }\r\n                \r\n                if (quizData.players && quizData.players.some(p => p.id === userId)) {\r\n                    setView('quiz');\r\n                    return;\r\n                }\r\n\r\n                const newPlayer = { id: userId, name: `Player ${Math.floor(Math.random() * 1000)}` };\r\n                await updateDoc(quizDocRef, {\r\n                    players: arrayUnion(newPlayer)\r\n                });\r\n                \r\n                setView('quiz');\r\n            } else {\r\n                setError(\"Quiz not found. Please check the code and try again.\");\r\n                setQuizCode('');\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error joining quiz:\", err);\r\n            setError(\"Could not join the quiz. Please check the code and your connection.\");\r\n            setQuizCode('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-md mx-auto text-center\">\r\n            <button onClick={() => { setView('home'); setError(''); }} className=\"mb-6 text-cyan-400 hover:text-cyan-300 flex items-center gap-2 mx-auto\">\r\n                <ArrowLeft size={20} /> Back to Home\r\n            </button>\r\n            <h2 className=\"text-4xl font-bold mb-4 text-cyan-400\">Join a Quiz</h2>\r\n            <p className=\"text-gray-400 mb-4\">Enter the code from the quiz host to join.</p>\r\n            <p className=\"text-yellow-400 mb-8 text-sm\">ðŸ’¡ Try \"DEMO\" or \"TEST\" for demo mode (works without Firebase)</p>\r\n            <form onSubmit={handleJoin}>\r\n                <input\r\n                    type=\"text\"\r\n                    value={localCode}\r\n                    onChange={(e) => setLocalCode(e.target.value)}\r\n                    placeholder=\"ENTER CODE\"\r\n                    className=\"w-full bg-gray-800 text-white p-4 rounded-lg text-center text-2xl tracking-widest font-bold border-2 border-gray-600 focus:ring-4 focus:ring-cyan-500/50 focus:outline-none\"\r\n                />\r\n                {error && <p className=\"text-red-400 mt-4\">{error}</p>}\r\n                <button type=\"submit\" className=\"w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl mt-6\">\r\n                    Join Quiz\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}