{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ACER\\\\Desktop\\\\quiz app\\\\src\\\\views\\\\AttemptQuizView.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { db, appId } from '../firebase/config';\nimport { doc, getDoc, updateDoc, arrayUnion } from 'firebase/firestore';\nimport { ArrowLeft } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AttemptQuizView = ({\n  setView,\n  setQuizCode,\n  setError,\n  error,\n  userId,\n  localQuizzes,\n  savedQuizzes,\n  setPlayerName\n}) => {\n  _s();\n  const [localCode, setLocalCode] = useState('');\n  const [playerNameInput, setPlayerNameInput] = useState('');\n  const handleJoin = async e => {\n    e.preventDefault();\n    setError('');\n    const trimmedCode = localCode.trim();\n    const trimmedName = playerNameInput.trim();\n    if (!trimmedCode) {\n      setError(\"Please enter a quiz code.\");\n      return;\n    }\n    if (!trimmedName) {\n      setError(\"Please enter your name.\");\n      return;\n    }\n    setQuizCode(trimmedCode);\n    setPlayerName(trimmedName);\n\n    // First, check if this is a locally created quiz\n    if (localQuizzes && localQuizzes[trimmedCode]) {\n      console.log(\"Found local quiz with code:\", trimmedCode);\n      alert(`Welcome ${trimmedName}! Joining local quiz...`);\n      setView('quiz');\n      return;\n    }\n\n    // Check if this is a saved quiz from database\n    if (savedQuizzes && savedQuizzes[trimmedCode]) {\n      console.log(\"Found saved quiz with code:\", trimmedCode);\n      alert(`Welcome ${trimmedName}! Joining saved quiz...`);\n      setView('quiz');\n      return;\n    }\n\n    // Check if this is a demo quiz code (for testing without Firebase)\n    if (trimmedCode === 'DEMO' || trimmedCode === 'TEST') {\n      console.log(\"Joining demo quiz with code:\", trimmedCode);\n      alert(`Welcome ${trimmedName}! Joining demo quiz...`);\n      setView('quiz');\n      return;\n    }\n    const quizDocPath = `/artifacts/${appId}/public/data/quizzes/${trimmedCode}`;\n    const quizDocRef = doc(db, quizDocPath);\n    try {\n      const docSnap = await getDoc(quizDocRef);\n      if (docSnap.exists()) {\n        const quizData = docSnap.data();\n        if (quizData.status !== 'lobby') {\n          setError(`This quiz is already ${quizData.status}. You can no longer join.`);\n          setQuizCode('');\n          return;\n        }\n        if (quizData.players && quizData.players.some(p => p.id === userId)) {\n          setView('quiz');\n          return;\n        }\n        const newPlayer = {\n          id: userId,\n          name: `Player ${Math.floor(Math.random() * 1000)}`\n        };\n        await updateDoc(quizDocRef, {\n          players: arrayUnion(newPlayer)\n        });\n        setView('quiz');\n      } else {\n        setError(\"Quiz not found. Please check the code and try again.\");\n        setQuizCode('');\n      }\n    } catch (err) {\n      console.error(\"Error joining quiz:\", err);\n      setError(\"Could not join the quiz. Please check the code and your connection.\");\n      setQuizCode('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-md mx-auto text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setView('home');\n        setError('');\n      },\n      className: \"mb-6 text-cyan-400 hover:text-cyan-300 flex items-center gap-2 mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), \" Back to Home\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-4xl font-bold mb-4 text-cyan-400\",\n      children: \"Join a Quiz\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-400 mb-4\",\n      children: \"Enter the code from the quiz host to join.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-yellow-400 mb-8 text-sm\",\n      children: \"\\uD83D\\uDCA1 Try \\\"DEMO\\\" or \\\"TEST\\\" for demo mode (works without Firebase)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleJoin,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: playerNameInput,\n        onChange: e => setPlayerNameInput(e.target.value),\n        placeholder: \"Enter your name\",\n        className: \"w-full bg-gray-800 text-white p-3 rounded-lg text-center text-lg border-2 border-gray-600 focus:ring-4 focus:ring-cyan-500/50 focus:outline-none mb-4\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: localCode,\n        onChange: e => setLocalCode(e.target.value),\n        placeholder: \"ENTER CODE\",\n        className: \"w-full bg-gray-800 text-white p-4 rounded-lg text-center text-2xl tracking-widest font-bold border-2 border-gray-600 focus:ring-4 focus:ring-cyan-500/50 focus:outline-none\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-400 mt-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl mt-6\",\n        children: \"Join Quiz\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n};\n_s(AttemptQuizView, \"G9ckwfixqcgr1IT1V6xW4Qqy8zw=\");\n_c = AttemptQuizView;\nvar _c;\n$RefreshReg$(_c, \"AttemptQuizView\");","map":{"version":3,"names":["React","useState","db","appId","doc","getDoc","updateDoc","arrayUnion","ArrowLeft","jsxDEV","_jsxDEV","AttemptQuizView","setView","setQuizCode","setError","error","userId","localQuizzes","savedQuizzes","setPlayerName","_s","localCode","setLocalCode","playerNameInput","setPlayerNameInput","handleJoin","e","preventDefault","trimmedCode","trim","trimmedName","console","log","alert","quizDocPath","quizDocRef","docSnap","exists","quizData","data","status","players","some","p","id","newPlayer","name","Math","floor","random","err","className","children","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","required","_c","$RefreshReg$"],"sources":["C:/Users/ACER/Desktop/quiz app/src/views/AttemptQuizView.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { db, appId } from '../firebase/config';\r\nimport { doc, getDoc, updateDoc, arrayUnion } from 'firebase/firestore';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\nexport const AttemptQuizView = ({ setView, setQuizCode, setError, error, userId, localQuizzes, savedQuizzes, setPlayerName }) => {\r\n    const [localCode, setLocalCode] = useState('');\r\n    const [playerNameInput, setPlayerNameInput] = useState('');\r\n\r\n    const handleJoin = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        const trimmedCode = localCode.trim();\r\n        const trimmedName = playerNameInput.trim();\r\n        \r\n        if (!trimmedCode) {\r\n            setError(\"Please enter a quiz code.\");\r\n            return;\r\n        }\r\n        \r\n        if (!trimmedName) {\r\n            setError(\"Please enter your name.\");\r\n            return;\r\n        }\r\n\r\n        setQuizCode(trimmedCode);\r\n        setPlayerName(trimmedName);\r\n\r\n        // First, check if this is a locally created quiz\r\n        if (localQuizzes && localQuizzes[trimmedCode]) {\r\n            console.log(\"Found local quiz with code:\", trimmedCode);\r\n            alert(`Welcome ${trimmedName}! Joining local quiz...`);\r\n            setView('quiz');\r\n            return;\r\n        }\r\n\r\n        // Check if this is a saved quiz from database\r\n        if (savedQuizzes && savedQuizzes[trimmedCode]) {\r\n            console.log(\"Found saved quiz with code:\", trimmedCode);\r\n            alert(`Welcome ${trimmedName}! Joining saved quiz...`);\r\n            setView('quiz');\r\n            return;\r\n        }\r\n\r\n        // Check if this is a demo quiz code (for testing without Firebase)\r\n        if (trimmedCode === 'DEMO' || trimmedCode === 'TEST') {\r\n            console.log(\"Joining demo quiz with code:\", trimmedCode);\r\n            alert(`Welcome ${trimmedName}! Joining demo quiz...`);\r\n            setView('quiz');\r\n            return;\r\n        }\r\n\r\n        const quizDocPath = `/artifacts/${appId}/public/data/quizzes/${trimmedCode}`;\r\n        const quizDocRef = doc(db, quizDocPath);\r\n\r\n        try {\r\n            const docSnap = await getDoc(quizDocRef);\r\n            if (docSnap.exists()) {\r\n                const quizData = docSnap.data();\r\n\r\n                if (quizData.status !== 'lobby') {\r\n                    setError(`This quiz is already ${quizData.status}. You can no longer join.`);\r\n                    setQuizCode('');\r\n                    return;\r\n                }\r\n                \r\n                if (quizData.players && quizData.players.some(p => p.id === userId)) {\r\n                    setView('quiz');\r\n                    return;\r\n                }\r\n\r\n                const newPlayer = { id: userId, name: `Player ${Math.floor(Math.random() * 1000)}` };\r\n                await updateDoc(quizDocRef, {\r\n                    players: arrayUnion(newPlayer)\r\n                });\r\n                \r\n                setView('quiz');\r\n            } else {\r\n                setError(\"Quiz not found. Please check the code and try again.\");\r\n                setQuizCode('');\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error joining quiz:\", err);\r\n            setError(\"Could not join the quiz. Please check the code and your connection.\");\r\n            setQuizCode('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-md mx-auto text-center\">\r\n            <button onClick={() => { setView('home'); setError(''); }} className=\"mb-6 text-cyan-400 hover:text-cyan-300 flex items-center gap-2 mx-auto\">\r\n                <ArrowLeft size={20} /> Back to Home\r\n            </button>\r\n            <h2 className=\"text-4xl font-bold mb-4 text-cyan-400\">Join a Quiz</h2>\r\n            <p className=\"text-gray-400 mb-4\">Enter the code from the quiz host to join.</p>\r\n            <p className=\"text-yellow-400 mb-8 text-sm\">ðŸ’¡ Try \"DEMO\" or \"TEST\" for demo mode (works without Firebase)</p>\r\n            <form onSubmit={handleJoin}>\r\n                <input\r\n                    type=\"text\"\r\n                    value={playerNameInput}\r\n                    onChange={(e) => setPlayerNameInput(e.target.value)}\r\n                    placeholder=\"Enter your name\"\r\n                    className=\"w-full bg-gray-800 text-white p-3 rounded-lg text-center text-lg border-2 border-gray-600 focus:ring-4 focus:ring-cyan-500/50 focus:outline-none mb-4\"\r\n                    required\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    value={localCode}\r\n                    onChange={(e) => setLocalCode(e.target.value)}\r\n                    placeholder=\"ENTER CODE\"\r\n                    className=\"w-full bg-gray-800 text-white p-4 rounded-lg text-center text-2xl tracking-widest font-bold border-2 border-gray-600 focus:ring-4 focus:ring-cyan-500/50 focus:outline-none\"\r\n                    required\r\n                />\r\n                {error && <p className=\"text-red-400 mt-4\">{error}</p>}\r\n                <button type=\"submit\" className=\"w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl mt-6\">\r\n                    Join Quiz\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}